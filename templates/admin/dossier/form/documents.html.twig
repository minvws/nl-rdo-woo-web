{% set uploadStatus = dossier.uploadStatus %}

<div class="bhr-card js-inventory-status-wrapper">
    <div class="text-lg pb-2">
        <h2 class="bhr-form-help">Stap 1</h2>
        <p><strong>Upload inventarislijst</strong></p>
        <p class="bhr-form-help mt-2 mb-3">
            Upload de Zylab rapportage die bij dit besluit hoort. Dit is een Excel-bestand.
        </p>
    </div>

    <div
        {% if dataPath is not empty %}
            id="js-inventory-status"
            data-done-url="{{ path('app_admin_dossier_concept_documents', { dossierId: dossier.dossierNr }) }}"
            data-endpoint="{{ path(dataPath, { dossierId: dossier.dossierNr }) }}"
            role="status"
        {% endif %}
    >
        {% include 'admin/dossier/form/processrun.html.twig' with { dossier: dossier, inventoryStatus: inventoryStatus } %}
    </div>

    {% if inventoryStatus.isQueued or inventoryStatus.isRunning %}
        <div class="pt-8 js-inventory-status-continue-later">
            <a href="{{ path('app_admin_dossiers') }}" class="bhr-button bhr-button--secondary bhr-button--fixed-width">Later verdergaan</a>
        </div>
    {% endif %}
</div>

{% if inventoryStatus.isUploaded %}
<div class="bhr-card mt-10">
    <div class="text-lg pb-2">
        <p class="bhr-form-help">Stap 2</p>
        <p><strong>Upload documenten</strong></p>
        <p class="bhr-form-help mt-2 mb-3">Upload alle documenten die met beoordeling ‘openbaar’ of ‘deels openbaar’ op de inventarislijst staan. Zorg dat de bestandsnamen overeenkomen met de document-nummers op de inventarislijst (bijvoorbeeld: 123.pdf)</p>
    </div>

    <twig:Admin:DossierDocuments
        dossier="{{ dossier }}"
        uploadStatus="{{ uploadStatus }}"
    />

    <div class="mt-4">
        <div class="hidden" id="js-dossier-documents-can-not-continue">
            <twig:Admin:InputErrors error="Nog niet alle documenten zijn geüpload of verwerkt. Voeg ze toe of wacht tot ze verwerkt zijn om verder te gaan." />
        </div>

        <a
            href="{{ path(workflowStatus.nextStep.routeName, { dossierId: dossier.dossierNr }) }}"
            class="bhr-button bhr-button--primary bhr-button--fixed-width mr-4"
            id="js-dossier-documents-next-step"
        >{{ "On to conclusion"|trans }}</a>

        <a
            href="{{ path('app_admin_dossier', { dossierId: dossier.dossierNr }) }}"
            class="bhr-button bhr-button--secondary bhr-button--fixed-width mr-4"
        >{{ "Later verdergaan"|trans }}</a>
    </div>
</div>
{% endif %}
