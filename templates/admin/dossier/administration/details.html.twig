{% extends 'admin/base.html.twig' %}

{% import "admin/macros/facet.html.twig" as macro %}

{% set page_title = 'admin.decisions.manage_details' | trans %}

{% block body %}
<div class="bhr-container">
    {% include 'admin/shared/page-title.html.twig' %}

    <div class="bhr-card">
        {% include 'admin/shared/flash-messages.html.twig' %}

        <div class="js-confirm-action">
            {{ form(form) }}


            {% for key, confirmation in confirmations | filter(confirmation => confirmation is not null) %}
                <div class="js-action" data-key="{{ key }}" data-confirmation="{{ confirmation }}"></div>
            {% endfor %}
        </div>

        <div class="pt-8">
            <table class="bhr-table">
                <tbody>
                    <tr>
                        <th scope="row">Status</th>
                        <td><twig:Admin:DossierStatusBadge status="{{ dossier.status }}" /></td>
                    </tr>
                    <tr>
                        <th scope="row">{{ 'global.organisation' | trans()}}</th>
                        <td>{{ dossier.organisation.name }}</td>
                    </tr>
                    <tr>
                        <th scope="row">{{ 'admin.dossiers.action.row.dossier_completed' | trans }}</th>
                        <td>{{ dossier.completed ? 'ja' : 'nee' }}</td>
                    </tr>
                    {% if dossier.uploadStatus is defined %}
                    <tr>
                        <th scope="row">{{ 'admin.dossiers.action.row.expected_uploads' | trans }}</th>
                        <td>{{ dossier.uploadStatus.expectedUploadCount }}</td>
                    </tr>
                    <tr>
                        <th scope="row">{{ 'admin.dossiers.action.row.actual_uploads' | trans }}</th>
                        <td>{{ dossier.uploadStatus.actualUploadCount }}</td>
                    </tr>
                    <tr>
                        <th scope="row">{{ 'admin.dossiers.action.row.uploads_completed' | trans }}</th>
                        <td>{{ dossier.uploadStatus.complete  ? 'ja' : 'nee' }}</td>
                    </tr>
                    {% endif %}
                    {% for step in workflowStatus.steps %}
                        <tr>
                            <th scope="row">{{ 'admin.dossiers.action.row.step_completed' | trans({'step': step.stepName.value}) }}</th>
                            <td>{{ step.completed ? 'ja' : 'nee' }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
