{% set uploadStatus = dossier.uploadStatus %}

<div class="bhr-card js-inventory-status-wrapper">
    <div class="text-lg pb-2">
        <h2 class="bhr-form-help">Stap 1</h2>
        <p><strong>Upload productierapport</strong></p>
        <p class="bhr-form-help mt-2 mb-3">
            Upload de Zylab rapportage die bij dit besluit hoort. Dit is een Excel-bestand.
        </p>
    </div>

    <div
        {% if dataPath is not empty %}
            id="js-inventory-status"
            data-done-url="{{ path('app_admin_dossier_woodecision_documents_concept', { prefix: dossier.documentPrefix, dossierId: dossier.dossierNr }) }}"
            data-endpoint="{{ path(dataPath, { prefix: dossier.documentPrefix, dossierId: dossier.dossierNr }) }}"
            role="status"
        {% endif %}
    >
        {% include 'admin/dossier/woo-decision/documents/processrun.html.twig' with { dossier: dossier, inventoryStatus: inventoryStatus } %}
    </div>

    {% if inventoryStatus.isQueued or inventoryStatus.isRunning %}
        <div class="pt-8 js-inventory-status-continue-later">
            <a href="{{ path('app_admin_dossiers') }}" class="bhr-button bhr-button--secondary bhr-button--fixed-width">{{ 'admin.global.continue_later' | trans }}</a>
        </div>
    {% endif %}
</div>

{% if inventoryStatus.isReadyForDocumentUpload and app.request.get('replace') is null %}
<div class="bhr-card mt-10">
    <div class="text-lg pb-2">
        <h2 class="bhr-form-help">Stap 2</h2>
        <p><strong>Upload documenten</strong></p>
        <p class="bhr-form-help mt-2 mb-3">Upload alle documenten die met beoordeling 'openbaar' of 'deels openbaar' in het productierapport staan. Zorg dat de bestandsnamen overeenkomen met de documentnummers in het productierapport (bijvoorbeeld: 123.pdf)</p>
    </div>

    <div {{ vue_component('WooDecisionAddDocumentsController', {
        allowedFileTypes: uploadGroupId.fileTypeNames,
        allowedMimeTypes: uploadGroupId.mimeTypes,
        dossierId: dossier.dossierNr,
        isComplete: uploadStatus.isComplete,
        maxFileSize: 1024 * 1024 * 1024 * 32,
        nextStepUrl: path(workflowStatus.nextStep.routeName, { prefix: dossier.documentPrefix, dossierId: dossier.dossierNr }),
        continueLaterUrl: path('app_admin_dossier', { prefix: dossier.documentPrefix, dossierId: dossier.dossierNr }),
        processEndpoint: path('api_uploader_woo_decision_process', { dossierId: dossier.id }),
        statusEndpoint: path('api_uploader_woo_decision_status', { dossierId: dossier.id }),
        uploadEndpoint: path('_uploader_upload_woo_decision', { dossierId: dossier.id }),
    }) }}>
        <div class="min-h-56"></div>
    </div>
</div>
{% endif %}
